(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var d,f="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function g(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var h=g(this),k;
if("function"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var m;a:{var n={a:!0},p={};try{p.__proto__=n;m=p.a;break a}catch(a){}m=!1}k=m?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=k;function r(a){a=parseFloat(a.getAttribute("time-limit"));isFinite(a)||(a=-1);return 0<a?a:-1}function t(a,b,c){return a.hasAttribute(b)?a.getAttribute(b):c};var u=["gwd-before-and-after","gwd-breathe","gwd-reveal","gwd-wave"];function v(a){return"gwd-page"==a.tagName.toLowerCase()||"gwd-page"==a.getAttribute("is")}function w(a){if(v(a))return a;for(;a&&9!=a.nodeType;)if((a=a.parentElement)&&v(a))return a;return null}function x(a){return(a=t(a,"images",""))?a.split(",").map(function(b){return b.trim()}):[]};function y(a,b){var c=void 0===c?null:c;var e=document.createEvent("CustomEvent");e.initCustomEvent(a,!0,!0,c);b.dispatchEvent(e)};var z=["images"];function A(){var a=HTMLElement.call(this)||this;a.h=[];a.C=!1;a.K=0;a.s=1;a.u=-1;a.J=a.P.bind(a);a.I=a.R.bind(a);a.O=a.U.bind(a);a.N=a.T.bind(a);a.M=a.S.bind(a);a.m=!1;a.v=0;a.G=!1;a.i=null;a.F=null;return a}var B=HTMLElement;A.prototype=f(B.prototype);A.prototype.constructor=A;if(q)q(A,B);else for(var C in B)if("prototype"!=C)if(Object.defineProperties){var D=Object.getOwnPropertyDescriptor(B,C);D&&Object.defineProperty(A,C,D)}else A[C]=B[C];d=A.prototype;
d.connectedCallback=function(){var a=this;this.G=!0;this.A=this.clientWidth;this.D=this.clientHeight;this.l=x(this);this.H=t(this,"scaling","cover");this.u=1E3*r(this);setTimeout(function(){a.firstElementChild&&-1!==u.indexOf(a.firstElementChild.tagName.toLowerCase())&&(a.g=a.firstElementChild);void 0===a.j&&(a.j=a.ownerDocument.createElement("canvas"),a.appendChild(a.j));E(a,a.j);void 0===a.o&&(a.o=a.ownerDocument.createElement("gwd-gesture"),a.appendChild(a.o));if(a.g){var b=a.o;b.addEventListener("pointerover",
a.O,!1);b.addEventListener("pointerout",a.N,!1);b.addEventListener("pointermove",a.M,!1)}a.gwdIsLoaded()&&a.g?(a.i&&(cancelAnimationFrame(a.i),a.i=null),F(a)):a.gwdIsLoaded()||((b=w(a))?b.gwdIsLoaded()&&a.gwdLoad():a.gwdLoad())})};d.attributeChangedCallback=function(a,b,c){b!==c&&this.gwdIsLoaded()&&(this.l=x(this),this.C=!1,G(this))};d.U=function(a){void 0===a.offsetX&&(this.F=this.getBoundingClientRect());H(this,a)};d.T=function(){this.g.handlePointerOut()};
d.S=function(a){void 0!==this.B&&(H(this,a),this.m&&this.g.shouldRenderOnHoverWhilePaused()&&this.g.render(this.L-this.v-this.B))};function H(a,b){if(void 0!==b.offsetX){var c=b.offsetX/a.A;b=b.offsetY/a.D}else c=(b.clientX-a.F.left)/a.A,b=(b.clientY-a.F.top)/a.D;c=Math.max(0,Math.min(1,c));b=Math.max(0,Math.min(1,b));a.g.handlePointerUpdate(c,b)}
d.disconnectedCallback=function(){this.G=!1;if(this.o){var a=this.o;a.removeEventListener("pointerover",this.O,!1);a.removeEventListener("pointerout",this.N,!1);a.removeEventListener("pointermove",this.M,!1)}};d.gwdLoad=function(){G(this)};d.gwdIsLoaded=function(){return this.C};
function G(a){if(a.l.length){a.K=0;a.h=[];for(var b=0;b<a.l.length;b++){var c=a.ownerDocument.createElement("img");c.addEventListener("load",a.J,!1);c.addEventListener("error",a.I,!1);a.h.push(c);a.l[b]?c.src=a.l[b]:a.P()}}else a.C=!0,y("ready",a)}
d.P=function(){var a=this;if(++this.K===this.l.length){I(this);for(var b=[],c=0;c<this.h.length;c++){var e=J(this,this.h[c]);b.push(e)}this.g?(this.g.initialize(b,this.h,this.s),this.i=requestAnimationFrame(function(){F(a)})):this.j.getContext("2d").drawImage(b[0],0,0,this.j.width,this.j.height)}};d.R=function(){I(this);this.h=[]};function I(a){for(var b=0;b<a.h.length;b++){var c=a.h[b];c.removeEventListener("load",a.J,!1);c.removeEventListener("error",a.I,!1)}a.C=!0;y("ready",a)}
function F(a){if(0!==a.A&&0!==a.D&&!a.m&&!1!==a.G){void 0===a.B&&(a.B=Date.now());var b=Date.now()-a.B-a.v;0<a.u&&b>a.u?(a.pause(),y("autoplayended",a)):(a.g.render(b),a.i=requestAnimationFrame(function(){F(a)}))}}function E(a,b){a.s=window.devicePixelRatio;b.width=a.A*a.s;b.height=a.D*a.s}
function J(a,b){var c=a.ownerDocument.createElement("canvas");E(a,c);var e=c.getContext("2d");switch(a.H){case "stretch":e.drawImage(b,0,0,c.width,c.height);break;default:var l=1;"contain"===a.H?l=Math.min(c.width/b.naturalWidth,c.height/b.naturalHeight):"none"!==a.H&&(l=Math.max(c.width/b.naturalWidth,c.height/b.naturalHeight));e.save();e.translate(c.width/2,c.height/2);e.scale(l,l);e.drawImage(b,-b.naturalWidth/2,-b.naturalHeight/2);e.restore()}return c}
d.pause=function(){this.m||(this.L=Date.now(),this.m=!0,this.u=-1)};d.play=function(){var a=this;this.m&&(this.m=!1,this.i=requestAnimationFrame(function(){a.v+=Date.now()-a.L;F(a)}))};h.Object.defineProperties(A,{observedAttributes:{configurable:!0,enumerable:!0,get:function(){return z}}});customElements.define("gwd-image-effect",A);}).call(this);
